# 1.5.9
This update includes several significant improvements to how the application communicates with the backend as well as continued optimizations, and some UI fixes.

## What's New
- **Exponential Airtable API call Retry Logic**
  - This helps potential ratelimit overflow
  - If there is an issue with the Airtable request, we can set retry logic for all or individual exceptions.
  - Based on attempt count
  - Can define the maximum number of attempts based on which call logic is being used (i.e. Calling for a list of todays bookings, fetching a mapraft record, etc.)
  - `attempt`<sup>2</sup> = seconds between next retry, with predefined maximum seconds depending on which exception is called
- **Improved Airtable Exception Logging**
  - Improved client and server side exception handling to provide much better logging for Airtable issues
  - Added exceptions for all common Airtable status codes
  - Ensure all Airtable calls are using the safe call
- **Dynamic Waiver Display in BookingRecordView**  
  The waiver section now adjusts based on the number of signed waivers to prevent UI issues with long dialogs:  
  - Up to 4 waivers: displayed normally  
  - 5–7 waivers: "Show more" option added to reveal up to 7 waivers  
  - 8 or more waivers: displayed in a separate dialog
- **Reports**
  - Value chips are now adaptive, allowing for improved text/number length handling
    - This fixes a bug where two digit values would move vertically on smaller devices
  - Removed "Rental" count from Reports as it was redundant and inefficient to calculate 
- **Atomic Clock**
  - Added a counter for Airtable call/operations for optimization and debugging
- **API Call Optimizations**
  - Optimized application by detecting flaws using new `safeApiCall` capabilities
  - Greatly reduced number of calls used in:
    - ManualInput (2x optimization)
    - Reports (around 10x optimization)
- **Client**
  - **Cache**
    - The previous API response from Airtable will be stored for a maximum of 5 seconds
    - This allows for the ability to switch between modes without needing to make another call if the response data is still fresh
    - Improves application optimization
  - **Identity**
    - All Airtable requests will now be tagged with the name of the application
    - This does not improve performance but is good practice
- **Organizer Field Update**  
  - Increased the maximum number of display lines from 1 to 2 for better visibility
- **New “Scroll to Top” Button**  
  - Added to both *ManualInput* and *ShuttleManualInput* for easier navigation
  - Activates when scrolled past at least 3 records
- **ShuttleManualInput Refresh Fix**  
  - Fixed an issue where the refresh button didn’t update the filtered records properly after fetch
- **Flags Dropdown UI Fix**  
  - Improved the behavior of the Flags dropdown to prevent it from breaking the dialog layout on large booking records
- **Mock Tests**
  - Added unit tests for `safeApiCall` using `ktor-mock` and `coroutine` tests
- Added dev level logging capabilities for HTTPClient 
- Cleaned graddle dependancies and move version management to dedicated libs.versions